"use strict";(self.webpackChunkFront=self.webpackChunkFront||[]).push([[222],{4222:(ie,T,m)=>{m.r(T),m.d(T,{AdminModule:()=>te});var g=m(6895),c=m(4019),l=m(433),e=m(1571);let p=(()=>{const t=class{constructor(){this.searchQuery="",this.isSearchBarVisible=!1,this.isMobileNavActive=!1}toggleSidebar(){document.body.classList.toggle("toggle-sidebar")}toggleSearchBar(){this.isSearchBarVisible=!this.isSearchBarVisible;const r=document.querySelector(".search-bar");r&&r.classList.toggle("search-bar-show",this.isSearchBarVisible)}toggleMobileNav(){this.isMobileNavActive=!this.isMobileNavActive,document.body.classList.toggle("mobile-nav-active",this.isMobileNavActive)}onSearch(){console.log("Search:",this.searchQuery)}};let n=t;return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-header"]],decls:84,vars:0,consts:[["id","header",1,"header","fixed-top","d-flex","align-items-center","shadow-sm","bg-white"],[1,"container-fluid","d-flex","align-items-center","justify-content-between"],["routerLink","/admin",1,"logo","d-flex","align-items-center","text-dark","fw-bold"],[1,"d-none","d-lg-block"],[1,"bi","bi-list","mobile-nav-toggle","fs-3","d-lg-none",3,"click"],[1,"header-nav","ms-auto"],[1,"d-flex","align-items-center","list-unstyled","mb-0"],[1,"nav-item","d-block","d-lg-none"],["href","#",1,"nav-link","nav-icon",3,"click"],[1,"bi","bi-search","fs-5"],[1,"nav-item","dropdown"],["href","#","data-bs-toggle","dropdown",1,"nav-link","nav-icon","position-relative"],[1,"bi","bi-bell","fs-5"],[1,"badge","bg-danger","rounded-pill","position-absolute","top-0","end-0"],[1,"dropdown-menu","dropdown-menu-end","shadow","border-0","mt-2"],[1,"dropdown-header","text-muted"],["href","#",1,"btn","btn-sm","btn-primary","ms-2"],[1,"dropdown-divider"],[1,"dropdown-item","d-flex","align-items-center"],[1,"bi","bi-exclamation-circle","text-warning","me-2"],[1,"mb-1"],[1,"text-muted","small","mb-0"],[1,"bi","bi-chat-left-text","fs-5"],[1,"badge","bg-success","rounded-pill","position-absolute","top-0","end-0"],["src","assets/img/messages-1.jpg","alt","",1,"rounded-circle","me-2",2,"width","40px"],[1,"nav-item","dropdown","pe-3"],["href","#","data-bs-toggle","dropdown",1,"nav-link","nav-profile","d-flex","align-items-center"],["src","assets/images/img/profile-img.jpg","alt","Profile",1,"rounded-circle","me-2",2,"width","36px"],[1,"d-none","d-md-block","text-dark","fw-semibold"],[1,"dropdown-header"],[1,"fw-bold"],[1,"text-muted"],["routerLink","/admin/profile",1,"dropdown-item"],[1,"bi","bi-person","me-2"],["routerLink","/admin/settings",1,"dropdown-item"],[1,"bi","bi-gear","me-2"],["routerLink","/admin/faq",1,"dropdown-item"],[1,"bi","bi-question-circle","me-2"],["routerLink","/login",1,"dropdown-item"],[1,"bi","bi-box-arrow-right","me-2"]],template:function(i,a){1&i&&(e.TgZ(0,"header",0)(1,"div",1)(2,"a",2)(3,"span",3),e._uU(4,"Time4Class Admin"),e.qZA()(),e.TgZ(5,"i",4),e.NdJ("click",function(){return a.toggleMobileNav()}),e.qZA(),e.TgZ(6,"nav",5)(7,"ul",6)(8,"li",7)(9,"a",8),e.NdJ("click",function(){return a.toggleSearchBar()}),e._UZ(10,"i",9),e.qZA()(),e.TgZ(11,"li",10)(12,"a",11),e._UZ(13,"i",12),e.TgZ(14,"span",13),e._uU(15,"4"),e.qZA()(),e.TgZ(16,"ul",14)(17,"li",15),e._uU(18," You have 4 new notifications "),e.TgZ(19,"a",16),e._uU(20,"View all"),e.qZA()(),e.TgZ(21,"li"),e._UZ(22,"hr",17),e.qZA(),e.TgZ(23,"li",18),e._UZ(24,"i",19),e.TgZ(25,"div")(26,"h6",20),e._uU(27,"Lorem Ipsum"),e.qZA(),e.TgZ(28,"p",21),e._uU(29,"Quae dolorem earum veritatis oditseno"),e.qZA(),e.TgZ(30,"p",21),e._uU(31,"30 min. ago"),e.qZA()()()()(),e.TgZ(32,"li",10)(33,"a",11),e._UZ(34,"i",22),e.TgZ(35,"span",23),e._uU(36,"3"),e.qZA()(),e.TgZ(37,"ul",14)(38,"li",15),e._uU(39," You have 3 new messages "),e.TgZ(40,"a",16),e._uU(41,"View all"),e.qZA()(),e.TgZ(42,"li"),e._UZ(43,"hr",17),e.qZA(),e.TgZ(44,"li",18),e._UZ(45,"img",24),e.TgZ(46,"div")(47,"h6",20),e._uU(48,"Maria Hudson"),e.qZA(),e.TgZ(49,"p",21),e._uU(50,"Velit asperiores et ducimus..."),e.qZA(),e.TgZ(51,"p",21),e._uU(52,"4 hrs. ago"),e.qZA()()()()(),e.TgZ(53,"li",25)(54,"a",26),e._UZ(55,"img",27),e.TgZ(56,"span",28),e._uU(57,"Admin"),e.qZA()(),e.TgZ(58,"ul",14)(59,"li",29)(60,"h6",30),e._uU(61,"Admin"),e.qZA(),e.TgZ(62,"span",31),e._uU(63,"Admin"),e.qZA()(),e.TgZ(64,"li"),e._UZ(65,"hr",17),e.qZA(),e.TgZ(66,"li")(67,"a",32),e._UZ(68,"i",33),e._uU(69," My Profile"),e.qZA()(),e.TgZ(70,"li")(71,"a",34),e._UZ(72,"i",35),e._uU(73," Account Settings"),e.qZA()(),e.TgZ(74,"li")(75,"a",36),e._UZ(76,"i",37),e._uU(77," Need Help?"),e.qZA()(),e.TgZ(78,"li"),e._UZ(79,"hr",17),e.qZA(),e.TgZ(80,"li")(81,"a",38),e._UZ(82,"i",39),e._uU(83," Sign Out"),e.qZA()()()()()()()())},dependencies:[c.rH],styles:[".header[_ngcontent-%COMP%]{height:70px;background:linear-gradient(135deg,#ffffff,#f8f9fa);box-shadow:0 4px 12px #0000000d;z-index:1000;padding:0 20px}.logo[_ngcontent-%COMP%]{font-size:1.5rem;transition:color .3s}.logo[_ngcontent-%COMP%]:hover{color:#007bff!important}.nav-link.nav-icon[_ngcontent-%COMP%]{padding:10px;color:#6c757d;transition:color .3s}.nav-link.nav-icon[_ngcontent-%COMP%]:hover{color:#007bff}.badge[_ngcontent-%COMP%]{font-size:.7rem;padding:3px 6px}.dropdown-menu[_ngcontent-%COMP%]{border-radius:8px;padding:10px;min-width:250px}.dropdown-item[_ngcontent-%COMP%]{padding:8px 15px;border-radius:4px;transition:background .3s}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f1f3f5}@media (max-width: 991px){.header[_ngcontent-%COMP%]{padding:0 15px}}"]}),n})();const A=function(){return{exact:!0}};let f=(()=>{const t=class{};let n=t;return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-sidebar"]],decls:32,vars:2,consts:[["id","sidebar",1,"sidebar","d-flex","flex-column"],[1,"sidebar-nav","list-unstyled","p-3","flex-grow-1"],[1,"nav-item"],["routerLink","/admin","routerLinkActive","active",1,"nav-link","d-flex","align-items-center",3,"routerLinkActiveOptions"],[1,"bi","bi-grid","me-3"],["data-bs-toggle","collapse","href","#users-nav",1,"nav-link","collapsed","d-flex","align-items-center"],[1,"bi","bi-person","me-3"],[1,"bi","bi-chevron-down","ms-auto"],["id","users-nav",1,"nav-content","collapse","list-unstyled"],["routerLink","/admin/users","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-circle","me-2"],["routerLink","/admin/users/add","routerLinkActive","active",1,"nav-link"],["routerLink","/admin/timetables","routerLinkActive","active",1,"nav-link","d-flex","align-items-center"],[1,"bi","bi-calendar4-week","me-3"],["routerLink","/admin/calendar",1,"nav-link","d-flex","align-items-center"],[1,"bi","bi-calendar","me-3"]],template:function(i,a){1&i&&(e.TgZ(0,"aside",0)(1,"ul",1)(2,"li",2)(3,"a",3),e._UZ(4,"i",4),e.TgZ(5,"span"),e._uU(6,"Dashboard"),e.qZA()()(),e.TgZ(7,"li",2)(8,"a",5),e._UZ(9,"i",6),e.TgZ(10,"span"),e._uU(11,"Users"),e.qZA(),e._UZ(12,"i",7),e.qZA(),e.TgZ(13,"ul",8)(14,"li")(15,"a",9),e._UZ(16,"i",10),e._uU(17," All Users"),e.qZA()(),e.TgZ(18,"li")(19,"a",11),e._UZ(20,"i",10),e._uU(21," Add User"),e.qZA()()()(),e.TgZ(22,"li",2)(23,"a",12),e._UZ(24,"i",13),e.TgZ(25,"span"),e._uU(26,"Timetables"),e.qZA()()(),e.TgZ(27,"li",2)(28,"a",14),e._UZ(29,"i",15),e.TgZ(30,"span"),e._uU(31,"Calendar"),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("routerLinkActiveOptions",e.DdM(1,A)))},dependencies:[c.rH,c.Od],styles:[".sidebar[_ngcontent-%COMP%]{position:fixed;top:70px;left:0;width:260px;height:calc(100vh - 70px);background:linear-gradient(180deg,#1a1d29,#2c3340);color:#fff;padding:0;box-shadow:4px 0 15px #0000001a;transition:transform .3s ease;z-index:999}.sidebar-nav[_ngcontent-%COMP%]{margin:0}.nav-link[_ngcontent-%COMP%]{padding:12px 20px;color:#ffffffd9;font-size:1rem;font-weight:500;border-radius:6px;transition:all .3s}.nav-link[_ngcontent-%COMP%]:hover, .nav-link.active[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);color:#fff}.nav-content[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:10px 20px 10px 40px;font-size:.95rem}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}@media (max-width: 991px){.sidebar[_ngcontent-%COMP%]{transform:translate(-260px)}body.mobile-nav-active[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{transform:translate(0)}}"]}),n})(),h=(()=>{const t=class{};let n=t;return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-footer"]],decls:10,vars:0,consts:[["id","footer",1,"footer","text-center","py-3"],[1,"copyright","text-muted"],[1,"text-primary"],[1,"credits"],["routerLink","/",1,"text-primary","text-decoration-none"]],template:function(i,a){1&i&&(e.TgZ(0,"footer",0)(1,"div",1),e._uU(2," \xa9 2025 "),e.TgZ(3,"strong")(4,"span",2),e._uU(5,"Time4Class Admin"),e.qZA()(),e._uU(6,". All Rights Reserved "),e.qZA(),e.TgZ(7,"div",3)(8,"a",4),e._uU(9,"Back to Public Site"),e.qZA()()())},dependencies:[c.rH],styles:[".footer[_ngcontent-%COMP%]{background:#f8f9fa;border-top:1px solid #e9ecef;font-size:.9rem}.text-primary[_ngcontent-%COMP%]{color:#007bff!important}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}"]}),n})(),x=(()=>{const t=class{};let n=t;return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-dashboard"]],decls:158,vars:0,consts:[["id","main",1,"main"],[1,"pagetitle"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],[1,"breadcrumb-item","active"],[1,"section","dashboard"],[1,"row"],[1,"col-md-6"],[1,"card","info-card"],[1,"card-body"],[1,"card-title"],[1,"d-flex","align-items-center","mb-3"],[1,"card-icon","rounded-circle","d-flex","align-items-center","justify-content-center"],[1,"bi","bi-people"],[1,"ps-3"],[1,"text-success","small","pt-1","fw-bold"],[1,"text-muted","small","pt-2","ps-1"],[1,"stats"],[1,"text-danger","small","fw-bold"],[1,"bi","bi-calendar4-week"],[1,"text-warning","small","fw-bold"],[1,"col-12"],[1,"card","recent-sales","overflow-auto"],[1,"table","table-borderless"],[1,"badge","bg-success"],[1,"badge","bg-warning"],[1,"stats","mt-3"]],template:function(i,a){1&i&&(e._UZ(0,"app-admin-header")(1,"app-admin-sidebar"),e.TgZ(2,"main",0)(3,"div",1)(4,"h1"),e._uU(5,"Dashboard"),e.qZA(),e.TgZ(6,"nav")(7,"ol",2)(8,"li",3)(9,"a",4),e._uU(10,"Home"),e.qZA()(),e.TgZ(11,"li",5),e._uU(12,"Dashboard"),e.qZA()()()(),e.TgZ(13,"section",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"h5",11),e._uU(19,"Students "),e.TgZ(20,"span"),e._uU(21,"| Overview"),e.qZA()(),e.TgZ(22,"div",12)(23,"div",13),e._UZ(24,"i",14),e.qZA(),e.TgZ(25,"div",15)(26,"h6"),e._uU(27,"150"),e.qZA(),e.TgZ(28,"span",16),e._uU(29,"5%"),e.qZA(),e.TgZ(30,"span",17),e._uU(31,"increase this week"),e.qZA()()(),e.TgZ(32,"div",18)(33,"p")(34,"strong"),e._uU(35,"Total Enrolled:"),e.qZA(),e._uU(36," 150"),e.qZA(),e.TgZ(37,"p")(38,"strong"),e._uU(39,"New This Month:"),e.qZA(),e._uU(40," 10"),e.qZA(),e.TgZ(41,"p")(42,"strong"),e._uU(43,"Active Today:"),e.qZA(),e._uU(44," 142"),e.qZA(),e.TgZ(45,"p")(46,"strong"),e._uU(47,"Absent Today:"),e.qZA(),e._uU(48," 8 "),e.TgZ(49,"span",19),e._uU(50,"(5.3%)"),e.qZA()()()()()(),e.TgZ(51,"div",8)(52,"div",9)(53,"div",10)(54,"h5",11),e._uU(55,"Classes "),e.TgZ(56,"span"),e._uU(57,"| Today"),e.qZA()(),e.TgZ(58,"div",12)(59,"div",13),e._UZ(60,"i",20),e.qZA(),e.TgZ(61,"div",15)(62,"h6"),e._uU(63,"25"),e.qZA(),e.TgZ(64,"span",16),e._uU(65,"10%"),e.qZA(),e.TgZ(66,"span",17),e._uU(67,"increase from yesterday"),e.qZA()()(),e.TgZ(68,"div",18)(69,"p")(70,"strong"),e._uU(71,"Scheduled Today:"),e.qZA(),e._uU(72," 25"),e.qZA(),e.TgZ(73,"p")(74,"strong"),e._uU(75,"Ongoing Now:"),e.qZA(),e._uU(76," 6"),e.qZA(),e.TgZ(77,"p")(78,"strong"),e._uU(79,"Upcoming:"),e.qZA(),e._uU(80," 15"),e.qZA(),e.TgZ(81,"p")(82,"strong"),e._uU(83,"Conflicts:"),e.qZA(),e._uU(84," 2 "),e.TgZ(85,"span",21),e._uU(86,"(8%)"),e.qZA()()()()()(),e.TgZ(87,"div",22)(88,"div",23)(89,"div",10)(90,"h5",11),e._uU(91,"Teachers "),e.TgZ(92,"span"),e._uU(93,"| All"),e.qZA()(),e.TgZ(94,"table",24)(95,"thead")(96,"tr")(97,"th"),e._uU(98,"Name"),e.qZA(),e.TgZ(99,"th"),e._uU(100,"Subject"),e.qZA(),e.TgZ(101,"th"),e._uU(102,"Classes Today"),e.qZA(),e.TgZ(103,"th"),e._uU(104,"Total Classes"),e.qZA(),e.TgZ(105,"th"),e._uU(106,"Status"),e.qZA()()(),e.TgZ(107,"tbody")(108,"tr")(109,"td"),e._uU(110,"Ms. Amina Ben Salem"),e.qZA(),e.TgZ(111,"td"),e._uU(112,"Math"),e.qZA(),e.TgZ(113,"td"),e._uU(114,"3"),e.qZA(),e.TgZ(115,"td"),e._uU(116,"15"),e.qZA(),e.TgZ(117,"td")(118,"span",25),e._uU(119,"Active"),e.qZA()()(),e.TgZ(120,"tr")(121,"td"),e._uU(122,"Mr. Karim Jlassi"),e.qZA(),e.TgZ(123,"td"),e._uU(124,"Science"),e.qZA(),e.TgZ(125,"td"),e._uU(126,"2"),e.qZA(),e.TgZ(127,"td"),e._uU(128,"12"),e.qZA(),e.TgZ(129,"td")(130,"span",25),e._uU(131,"Active"),e.qZA()()(),e.TgZ(132,"tr")(133,"td"),e._uU(134,"Dr. Hedi Gharbi"),e.qZA(),e.TgZ(135,"td"),e._uU(136,"Physics"),e.qZA(),e.TgZ(137,"td"),e._uU(138,"1"),e.qZA(),e.TgZ(139,"td"),e._uU(140,"10"),e.qZA(),e.TgZ(141,"td")(142,"span",26),e._uU(143,"On Leave"),e.qZA()()()()(),e.TgZ(144,"div",27)(145,"p")(146,"strong"),e._uU(147,"Total Teachers:"),e.qZA(),e._uU(148," 10"),e.qZA(),e.TgZ(149,"p")(150,"strong"),e._uU(151,"Active Today:"),e.qZA(),e._uU(152," 8"),e.qZA(),e.TgZ(153,"p")(154,"strong"),e._uU(155,"Average Classes/Teacher:"),e.qZA(),e._uU(156," 13"),e.qZA()()()()()()(),e._UZ(157,"app-admin-footer"),e.qZA())},dependencies:[c.rH,p,f,h],styles:["#main[_ngcontent-%COMP%]{margin-left:260px;padding:90px 30px 30px;background:#f1f3f5;min-height:100vh}.pagetitle[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;color:#1a1d29}.breadcrumb[_ngcontent-%COMP%]{font-size:.9rem}.card[_ngcontent-%COMP%]{border-radius:12px;background:#ffffff;transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-title[_ngcontent-%COMP%]{font-size:1.1rem}.card-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.5rem}.stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.table[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#1a1d29}@media (max-width: 991px){#main[_ngcontent-%COMP%]{margin-left:0;padding:80px 15px 15px}}"]}),n})();var Z=m(529),q=m(2843),_=m(262),C=m(2891);let U=(()=>{const t=class{constructor(r,i){this.http=r,this.authService=i,this.apiUrl="http://localhost:9999/api/admin/users"}getHeaders(){const r=this.authService.getToken();return r?{headers:new Z.WM({Authorization:`Bearer ${r}`})}:{}}getUsers(){return this.http.get(this.apiUrl,this.getHeaders()).pipe((0,_.K)(this.handleError("getUsers",[])))}addUser(r){return this.http.post(this.apiUrl,r,this.getHeaders()).pipe((0,_.K)(this.handleError("addUser",r)))}updateUser(r,i){return this.http.put(`${this.apiUrl}/${r}`,i,this.getHeaders()).pipe((0,_.K)(this.handleError("updateUser",i)))}deleteUser(r){return this.http.delete(`${this.apiUrl}/${r}`,this.getHeaders()).pipe((0,_.K)(this.handleError("deleteUser",null)))}handleError(r="operation",i){return a=>(console.error(`${r} failed:`,a),(0,q._)(()=>new Error(`${r} failed: ${a.message}`)))}};let n=t;return t.\u0275fac=function(i){return new(i||t)(e.LFG(Z.eN),e.LFG(C.e))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function M(n,t){if(1&n){const s=e.EpF();e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",20),e.NdJ("click",function(){const a=e.CHM(s).$implicit,o=e.oxw();return e.KtG(o.editUser(a))}),e._uU(11,"Edit"),e.qZA(),e.TgZ(12,"button",21),e.NdJ("click",function(){const a=e.CHM(s).$implicit,o=e.oxw();return e.KtG(o.deleteUser(a))}),e._uU(13,"Delete"),e.qZA()()()}if(2&n){const s=t.$implicit,r=t.index;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(s.username),e.xp6(2),e.Oqu(s.role),e.xp6(2),e.Oqu(s.email)}}let w=(()=>{const t=class{constructor(r,i){this.userService=r,this.router=i,this.users=[]}ngOnInit(){this.loadUsers()}loadUsers(){this.userService.getUsers().subscribe(r=>{this.users=r})}editUser(r){this.router.navigate([`/admin/users/edit/${r.id}`])}deleteUser(r){confirm(`Are you sure you want to delete ${r.username}?`)&&this.userService.deleteUser(r.id).subscribe(()=>{this.loadUsers()})}};let n=t;return t.\u0275fac=function(i){return new(i||t)(e.Y36(U),e.Y36(c.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users-list"]],decls:41,vars:2,consts:[["id","main",1,"main"],[1,"pagetitle","mb-4"],[1,"fw-bold"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin"],[1,"breadcrumb-item","active"],[1,"section"],[1,"row"],[1,"col-lg-12"],[1,"card","recent-sales","shadow-sm","border-0"],[1,"card-body","p-4"],[1,"card-title","fw-semibold"],[1,"text-muted"],[1,"table","table-hover"],[1,"bg-light"],[4,"ngFor","ngForOf"],[1,"mt-3"],["routerLink","/admin/users/add",1,"btn","btn-sm","btn-edit","me-2"],[1,"btn","btn-sm","btn-edit","me-2",3,"click"],[1,"btn","btn-sm","btn-delete",3,"click"]],template:function(i,a){1&i&&(e._UZ(0,"app-admin-header")(1,"app-admin-sidebar"),e.TgZ(2,"main",0)(3,"div",1)(4,"h1",2),e._uU(5,"Users"),e.qZA(),e.TgZ(6,"nav",3)(7,"ol",4)(8,"li",5)(9,"a",6),e._uU(10,"Dashboard"),e.qZA()(),e.TgZ(11,"li",7),e._uU(12,"Users"),e.qZA()()()(),e.TgZ(13,"section",8)(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"h5",13),e._uU(19,"All Users "),e.TgZ(20,"span",14),e._uU(21),e.qZA()(),e.TgZ(22,"table",15)(23,"thead",16)(24,"tr")(25,"th"),e._uU(26,"#"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Name"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Role"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Email"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Actions"),e.qZA()()(),e.TgZ(35,"tbody"),e.YNc(36,M,14,4,"tr",17),e.qZA()(),e.TgZ(37,"div",18)(38,"button",19),e._uU(39,"Add New User"),e.qZA()()()()()()()(),e._UZ(40,"app-admin-footer")),2&i&&(e.xp6(21),e.hij("| Total: ",a.users.length,""),e.xp6(15),e.Q6J("ngForOf",a.users))},dependencies:[g.sg,c.rH,p,f,h],styles:["#main[_ngcontent-%COMP%]{margin-left:260px;padding:90px 30px 30px;background:#f1f3f5;min-height:100vh}.card[_ngcontent-%COMP%]{border-radius:12px}.table[_ngcontent-%COMP%]{background:#ffffff;border-radius:8px;overflow:hidden}.btn-primary[_ngcontent-%COMP%]{background:#007bff;border-radius:6px;padding:8px 20px}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}.btn-edit[_ngcontent-%COMP%]{background:#2c3340;color:#fff;border:none;border-radius:6px;padding:6px 15px;transition:background .3s}.btn-edit[_ngcontent-%COMP%]:hover{background:#1a1d29}.btn-delete[_ngcontent-%COMP%]{background:#ffffff;color:#dc3545;border:1px solid #dc3545;border-radius:6px;padding:6px 15px;transition:all .3s}.btn-delete[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#c82333;border-color:#c82333}@media (max-width: 991px){#main[_ngcontent-%COMP%]{margin-left:0}}"]}),n})();function O(n,t){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const s=e.oxw();e.xp6(1),e.Oqu(s.successMessage)}}function y(n,t){if(1&n&&(e.TgZ(0,"div",38),e._uU(1),e.qZA()),2&n){const s=e.oxw();e.xp6(1),e.Oqu(s.errorMessage)}}function P(n,t){1&n&&(e.TgZ(0,"small",39),e._uU(1,"Full Name is required"),e.qZA())}function k(n,t){1&n&&(e.TgZ(0,"small",39),e._uU(1,"Email is required"),e.qZA())}function N(n,t){1&n&&(e.TgZ(0,"small",39),e._uU(1,"Password is required"),e.qZA())}function S(n,t){1&n&&(e.TgZ(0,"small",39),e._uU(1,"Role is required"),e.qZA())}let J=(()=>{const t=class{constructor(r,i){this.userService=r,this.router=i,this.user={fullName:"",name:"",role:"",email:"",password:"",status:"Pending"},this.isSubmitted=!1,this.successMessage=null,this.errorMessage=null}onSubmit(){if(this.isSubmitted=!0,this.successMessage=null,this.errorMessage=null,!(this.user.fullName&&this.user.email&&this.user.role&&this.user.password))return void(this.errorMessage="All fields are required");const r={username:this.user.fullName,password:this.user.password,email:this.user.email,name:this.user.fullName,role:this.user.role};this.userService.addUser(r).subscribe({next:()=>{console.log("User added:",r),this.successMessage="User added successfully! Redirecting...",setTimeout(()=>{this.router.navigate(["/admin/users"])},2e3)},error:i=>{console.error("Failed to add user:",i),this.errorMessage="Failed to add user: "+i.message}})}};let n=t;return t.\u0275fac=function(i){return new(i||t)(e.Y36(U),e.Y36(c.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-user"]],decls:65,vars:10,consts:[["id","main",1,"main"],[1,"pagetitle","mb-4"],[1,"fw-bold"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin"],["routerLink","/admin/users"],[1,"breadcrumb-item","active"],[1,"section"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card","shadow-sm","border-0"],[1,"card-body","p-4"],[1,"card-title","fw-semibold","text-center"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"d-flex","flex-column","align-items-center",3,"ngSubmit"],[1,"w-75"],[1,"mb-3","row"],["for","fullName",1,"col-sm-3","col-form-label","text-end"],[1,"col-sm-9"],["type","text","id","fullName","name","fullName","placeholder","Full Name","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["for","email",1,"col-sm-3","col-form-label","text-end"],["type","email","id","email","name","email","placeholder","Email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password",1,"col-sm-3","col-form-label","text-end"],["type","password","id","password","name","password","placeholder","Password","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","role",1,"col-sm-3","col-form-label","text-end"],["id","role","name","role","required","",1,"form-select",3,"ngModel","ngModelChange"],["value","","disabled","","selected",""],["value","ADMIN"],["value","STUDENT"],["value","TEACHER"],[1,"text-center"],["type","submit",1,"btn","btn-grey","me-2"],["routerLink","/admin/users",1,"btn","btn-outline-secondary"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"text-danger"]],template:function(i,a){1&i&&(e._UZ(0,"app-admin-header")(1,"app-admin-sidebar"),e.TgZ(2,"main",0)(3,"div",1)(4,"h1",2),e._uU(5,"Add User"),e.qZA(),e.TgZ(6,"nav",3)(7,"ol",4)(8,"li",5)(9,"a",6),e._uU(10,"Dashboard"),e.qZA()(),e.TgZ(11,"li",5)(12,"a",7),e._uU(13,"Users"),e.qZA()(),e.TgZ(14,"li",8),e._uU(15,"Add User"),e.qZA()()()(),e.TgZ(16,"section",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"h5",14),e._uU(22,"Add New User"),e.qZA(),e.YNc(23,O,2,1,"div",15),e.YNc(24,y,2,1,"div",16),e.TgZ(25,"form",17),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(26,"div",18)(27,"div",19)(28,"label",20),e._uU(29,"Full Name"),e.qZA(),e.TgZ(30,"div",21)(31,"input",22),e.NdJ("ngModelChange",function(d){return a.user.fullName=d}),e.qZA(),e.YNc(32,P,2,0,"small",23),e.qZA()(),e.TgZ(33,"div",19)(34,"label",24),e._uU(35,"Email"),e.qZA(),e.TgZ(36,"div",21)(37,"input",25),e.NdJ("ngModelChange",function(d){return a.user.email=d}),e.qZA(),e.YNc(38,k,2,0,"small",23),e.qZA()(),e.TgZ(39,"div",19)(40,"label",26),e._uU(41,"Password"),e.qZA(),e.TgZ(42,"div",21)(43,"input",27),e.NdJ("ngModelChange",function(d){return a.user.password=d}),e.qZA(),e.YNc(44,N,2,0,"small",23),e.qZA()(),e.TgZ(45,"div",19)(46,"label",28),e._uU(47,"Role"),e.qZA(),e.TgZ(48,"div",21)(49,"select",29),e.NdJ("ngModelChange",function(d){return a.user.role=d}),e.TgZ(50,"option",30),e._uU(51,"Select Role"),e.qZA(),e.TgZ(52,"option",31),e._uU(53,"Admin"),e.qZA(),e.TgZ(54,"option",32),e._uU(55,"Student"),e.qZA(),e.TgZ(56,"option",33),e._uU(57,"Teacher"),e.qZA()(),e.YNc(58,S,2,0,"small",23),e.qZA()()(),e.TgZ(59,"div",34)(60,"button",35),e._uU(61,"Add User"),e.qZA(),e.TgZ(62,"a",36),e._uU(63,"Cancel"),e.qZA()()()()()()()()(),e._UZ(64,"app-admin-footer")),2&i&&(e.xp6(23),e.Q6J("ngIf",a.successMessage),e.xp6(1),e.Q6J("ngIf",a.errorMessage),e.xp6(7),e.Q6J("ngModel",a.user.fullName),e.xp6(1),e.Q6J("ngIf",a.isSubmitted&&!a.user.fullName),e.xp6(5),e.Q6J("ngModel",a.user.email),e.xp6(1),e.Q6J("ngIf",a.isSubmitted&&!a.user.email),e.xp6(5),e.Q6J("ngModel",a.user.password),e.xp6(1),e.Q6J("ngIf",a.isSubmitted&&!a.user.password),e.xp6(5),e.Q6J("ngModel",a.user.role),e.xp6(9),e.Q6J("ngIf",a.isSubmitted&&!a.user.role))},dependencies:[g.O5,c.rH,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.On,l.F,p,f,h],styles:["#main[_ngcontent-%COMP%]{margin-left:260px;padding:90px 30px 30px;background:#f1f3f5;min-height:100vh}.card[_ngcontent-%COMP%]{border-radius:12px}.card-title[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;padding:12px 15px;border:1px solid #ced4da;transition:border-color .3s}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff4d}.col-form-label[_ngcontent-%COMP%]{font-weight:500;color:#1a1d29}.btn-grey[_ngcontent-%COMP%]{background:#2c3340;color:#fff;border:none;border-radius:6px;padding:10px 25px;transition:background .3s}.btn-grey[_ngcontent-%COMP%]:hover{background:#1a1d29}.btn-outline-secondary[_ngcontent-%COMP%]{border-radius:6px;padding:10px 25px}.w-75[_ngcontent-%COMP%]{width:75%}.text-end[_ngcontent-%COMP%]{padding-right:15px}@media (max-width: 991px){#main[_ngcontent-%COMP%]{margin-left:0}.w-75[_ngcontent-%COMP%]{width:100%}}"]}),n})();function F(n,t){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const s=e.oxw();e.xp6(1),e.Oqu(s.successMessage)}}function E(n,t){if(1&n&&(e.TgZ(0,"div",38),e._uU(1),e.qZA()),2&n){const s=e.oxw();e.xp6(1),e.Oqu(s.errorMessage)}}function L(n,t){1&n&&(e.TgZ(0,"small",39),e._uU(1,"Full Name is required"),e.qZA())}function Y(n,t){1&n&&(e.TgZ(0,"small",39),e._uU(1,"Email is required"),e.qZA())}function Q(n,t){1&n&&(e.TgZ(0,"small",39),e._uU(1," Password must be at least 8 characters with a letter, number, and special character "),e.qZA())}function D(n,t){1&n&&(e.TgZ(0,"small",39),e._uU(1,"Role is required"),e.qZA())}let $=(()=>{const t=class{constructor(r,i,a){this.userService=r,this.route=i,this.router=a,this.user={id:0,fullName:"",name:"",role:"",email:"",password:"",status:"Pending"},this.isSubmitted=!1,this.successMessage=null,this.errorMessage=null}ngOnInit(){const r=+this.route.snapshot.paramMap.get("id");this.userService.getUsers().subscribe(i=>{const a=i.find(o=>o.id===r);a?(this.user.id=a.id,this.user.fullName=a.username,this.user.email=a.email,this.user.role=a.role,this.user.status=a.status):this.errorMessage="User not found"})}onSubmit(){if(this.isSubmitted=!0,this.successMessage=null,this.errorMessage=null,!(this.user.fullName&&this.user.email&&this.user.role&&this.user.status))return void(this.errorMessage="Full Name, Email, Role, and Status are required");if(this.user.password&&!this.isStrongPassword(this.user.password))return void(this.errorMessage="Password must be at least 8 characters with a letter, number, and special character");const r={id:this.user.id,username:this.user.fullName,email:this.user.email,role:this.user.role,status:this.user.status,password:this.user.password||void 0};this.userService.updateUser(this.user.id,r).subscribe({next:()=>{console.log("User updated:",r),this.successMessage="User updated successfully! Redirecting...",setTimeout(()=>{this.router.navigate(["/admin/users"])},2e3)},error:i=>{console.error("Failed to update user:",i),this.errorMessage="Failed to update user: "+i.message}})}isStrongPassword(r){return/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(r)}};let n=t;return t.\u0275fac=function(i){return new(i||t)(e.Y36(U),e.Y36(c.gz),e.Y36(c.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-user"]],decls:65,vars:10,consts:[["id","main",1,"main"],[1,"pagetitle","mb-4"],[1,"fw-bold"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin"],["routerLink","/admin/users"],[1,"breadcrumb-item","active"],[1,"section"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card","shadow-sm","border-0"],[1,"card-body","p-4"],[1,"card-title","fw-semibold","text-center"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"d-flex","flex-column","align-items-center",3,"ngSubmit"],[1,"w-75"],[1,"mb-3","row"],["for","fullName",1,"col-sm-3","col-form-label","text-end"],[1,"col-sm-9"],["type","text","id","fullName","name","fullName","placeholder","Full Name","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["for","email",1,"col-sm-3","col-form-label","text-end"],["type","email","id","email","name","email","placeholder","Email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password",1,"col-sm-3","col-form-label","text-end"],["type","password","id","password","name","password","placeholder","Leave blank to keep current password",1,"form-control",3,"ngModel","ngModelChange"],["for","role",1,"col-sm-3","col-form-label","text-end"],["id","role","name","role","required","",1,"form-select",3,"ngModel","ngModelChange"],["value","","disabled",""],["value","ADMIN"],["value","STUDENT"],["value","TEACHER"],[1,"text-center"],["type","submit",1,"btn","btn-grey","me-2"],["routerLink","/admin/users",1,"btn","btn-outline-secondary"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"text-danger"]],template:function(i,a){1&i&&(e._UZ(0,"app-admin-header")(1,"app-admin-sidebar"),e.TgZ(2,"main",0)(3,"div",1)(4,"h1",2),e._uU(5,"Edit User"),e.qZA(),e.TgZ(6,"nav",3)(7,"ol",4)(8,"li",5)(9,"a",6),e._uU(10,"Dashboard"),e.qZA()(),e.TgZ(11,"li",5)(12,"a",7),e._uU(13,"Users"),e.qZA()(),e.TgZ(14,"li",8),e._uU(15,"Edit User"),e.qZA()()()(),e.TgZ(16,"section",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"h5",14),e._uU(22,"Edit User"),e.qZA(),e.YNc(23,F,2,1,"div",15),e.YNc(24,E,2,1,"div",16),e.TgZ(25,"form",17),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(26,"div",18)(27,"div",19)(28,"label",20),e._uU(29,"Full Name"),e.qZA(),e.TgZ(30,"div",21)(31,"input",22),e.NdJ("ngModelChange",function(d){return a.user.fullName=d}),e.qZA(),e.YNc(32,L,2,0,"small",23),e.qZA()(),e.TgZ(33,"div",19)(34,"label",24),e._uU(35,"Email"),e.qZA(),e.TgZ(36,"div",21)(37,"input",25),e.NdJ("ngModelChange",function(d){return a.user.email=d}),e.qZA(),e.YNc(38,Y,2,0,"small",23),e.qZA()(),e.TgZ(39,"div",19)(40,"label",26),e._uU(41,"Password"),e.qZA(),e.TgZ(42,"div",21)(43,"input",27),e.NdJ("ngModelChange",function(d){return a.user.password=d}),e.qZA(),e.YNc(44,Q,2,0,"small",23),e.qZA()(),e.TgZ(45,"div",19)(46,"label",28),e._uU(47,"Role"),e.qZA(),e.TgZ(48,"div",21)(49,"select",29),e.NdJ("ngModelChange",function(d){return a.user.role=d}),e.TgZ(50,"option",30),e._uU(51,"Select Role"),e.qZA(),e.TgZ(52,"option",31),e._uU(53,"Admin"),e.qZA(),e.TgZ(54,"option",32),e._uU(55,"Student"),e.qZA(),e.TgZ(56,"option",33),e._uU(57,"Teacher"),e.qZA()(),e.YNc(58,D,2,0,"small",23),e.qZA()()(),e.TgZ(59,"div",34)(60,"button",35),e._uU(61,"Save Changes"),e.qZA(),e.TgZ(62,"a",36),e._uU(63,"Cancel"),e.qZA()()()()()()()()(),e._UZ(64,"app-admin-footer")),2&i&&(e.xp6(23),e.Q6J("ngIf",a.successMessage),e.xp6(1),e.Q6J("ngIf",a.errorMessage),e.xp6(7),e.Q6J("ngModel",a.user.fullName),e.xp6(1),e.Q6J("ngIf",a.isSubmitted&&!a.user.fullName),e.xp6(5),e.Q6J("ngModel",a.user.email),e.xp6(1),e.Q6J("ngIf",a.isSubmitted&&!a.user.email),e.xp6(5),e.Q6J("ngModel",a.user.password),e.xp6(1),e.Q6J("ngIf",a.isSubmitted&&a.user.password&&!a.isStrongPassword(a.user.password)),e.xp6(5),e.Q6J("ngModel",a.user.role),e.xp6(9),e.Q6J("ngIf",a.isSubmitted&&!a.user.role))},dependencies:[g.O5,c.rH,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.On,l.F,p,f,h],styles:["#main[_ngcontent-%COMP%]{margin-left:260px;padding:90px 30px 30px;background:#f1f3f5;min-height:100vh}.card[_ngcontent-%COMP%]{border-radius:12px}.card-title[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;padding:12px 15px;border:1px solid #ced4da;transition:border-color .3s}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff4d}.col-form-label[_ngcontent-%COMP%]{font-weight:500;color:#1a1d29}.btn-grey[_ngcontent-%COMP%]{background:#2c3340;color:#fff;border:none;border-radius:6px;padding:10px 25px;transition:background .3s}.btn-grey[_ngcontent-%COMP%]:hover{background:#1a1d29}.btn-outline-secondary[_ngcontent-%COMP%]{border-radius:6px;padding:10px 25px}.w-75[_ngcontent-%COMP%]{width:75%}.text-end[_ngcontent-%COMP%]{padding-right:15px}@media (max-width: 991px){#main[_ngcontent-%COMP%]{margin-left:0}.w-75[_ngcontent-%COMP%]{width:100%}}"]}),n})();var u=m(4477);let I=(()=>{const t=class{constructor(r){this.http=r,this.apiUrl="http://localhost:9999/api/timetable-service/generate"}getSchedules(r=10){return this.http.get(`${this.apiUrl}?numClasses=${r}`)}};let n=t;return t.\u0275fac=function(i){return new(i||t)(e.LFG(Z.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function H(n,t){1&n&&(e.TgZ(0,"th",24),e._uU(1," Day "),e.qZA())}function z(n,t){if(1&n&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&n){const s=t.$implicit;e.xp6(1),e.hij(" ",s.day," ")}}function R(n,t){if(1&n&&(e.TgZ(0,"th",24),e._uU(1),e.qZA()),2&n){const s=e.oxw().$implicit;e.xp6(1),e.hij(" ",s," ")}}const j=function(){return{"white-space":"pre-line"}};function B(n,t){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){const s=t.$implicit,r=e.oxw().$implicit;e.Q6J("ngStyle",e.DdM(2,j)),e.xp6(1),e.hij(" ",s[r]," ")}}function K(n,t){1&n&&(e.ynx(0,26),e.YNc(1,R,2,1,"th",19),e.YNc(2,B,2,3,"td",27),e.BQk()),2&n&&e.Q6J("matColumnDef",t.$implicit)}function X(n,t){1&n&&e._UZ(0,"tr",29)}function G(n,t){1&n&&e._UZ(0,"tr",30)}function V(n,t){if(1&n&&(e.TgZ(0,"div",16)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"table",17),e.ynx(4,18),e.YNc(5,H,2,0,"th",19),e.YNc(6,z,2,1,"td",20),e.BQk(),e.YNc(7,K,3,1,"ng-container",21),e.YNc(8,X,1,0,"tr",22),e.YNc(9,G,1,0,"tr",23),e.qZA()()),2&n){const s=t.$implicit,r=t.index,i=e.oxw(2);e.xp6(2),e.Oqu((null==s.data[0]||null==s.data[0].schoolClass?null:s.data[0].schoolClass.name)||"Class "+(r+1)),e.xp6(1),e.Q6J("dataSource",s),e.xp6(4),e.Q6J("ngForOf",i.timeSlots),e.xp6(1),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns)}}function W(n,t){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,V,10,5,"div",15),e.qZA()),2&n){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.dataSources)}}const ee=[{path:"",component:x},{path:"users",component:w},{path:"users/add",component:J},{path:"users/edit/:id",component:$},{path:"timetables",component:(()=>{const t=class{constructor(r,i){this.timetableservice=r,this.cdr=i,this.days=["Monday","Tuesday","Wednesday","Thursday","Friday"],this.timeSlots=["08:00 - 10:00","10:00 - 12:00","14:00 - 16:00","16:00 - 18:00"],this.displayedColumns=["day",...this.timeSlots],this.dataSources=[]}generateSchedules(r=10){console.log("Fetching schedules for",r,"classes..."),this.timetableservice.getSchedules(r).subscribe(i=>{console.log("Raw data received:",i),i&&0!==i.length?(this.dataSources=i.map((a,o)=>{const d=this.transformScheduleData(a);return console.log(`Timetable ${o+1} grid data:`,d),new u.by(d)}),console.log("Data sources:",this.dataSources),this.cdr.detectChanges()):console.warn("No timetables received from backend.")},i=>{console.error("Error fetching schedules:",i.message)},()=>{console.log("Schedule fetch completed.")})}transformScheduleData(r){const i={};return r.forEach(a=>{const o=`${a.day}-${a.timeSlot}`;i[o]||(i[o]=[]),i[o].push(a)}),this.days.map(a=>{const o={day:a};return this.timeSlots.forEach(d=>{const v=i[`${a}-${d}`]||[];o[d]=v.length>0?v.map(b=>`${b.subject?.name||"N/A"} (${b.classroom?.name||b.classroom?.id||"N/A"}, ${b.teacher?.name||"N/A"})`).join("\n"):""}),o})}};let n=t;return t.\u0275fac=function(i){return new(i||t)(e.Y36(I),e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-timetables"]],decls:22,vars:1,consts:[["id","main",1,"main"],[1,"pagetitle","mb-4"],[1,"fw-bold"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin"],[1,"breadcrumb-item","active"],[1,"section"],[1,"row","justify-content-center"],[1,"col-lg-12"],[1,"card","shadow-sm","border-0"],[1,"card-body","p-4"],[1,"btn","btn-sm","btn-edit","me-2",3,"click"],[4,"ngIf"],["class","timetable-container",4,"ngFor","ngForOf"],[1,"timetable-container"],["mat-table","",1,"mat-elevation-z8","timetable",3,"dataSource"],["matColumnDef","day"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["mat-cell","",3,"ngStyle"],["mat-header-row",""],["mat-row",""]],template:function(i,a){1&i&&(e._UZ(0,"app-admin-header")(1,"app-admin-sidebar"),e.TgZ(2,"main",0)(3,"div",1)(4,"h1",2),e._uU(5,"School Timetables"),e.qZA(),e.TgZ(6,"nav",3)(7,"ol",4)(8,"li",5)(9,"a",6),e._uU(10,"Dashboard"),e.qZA()(),e.TgZ(11,"li",7),e._uU(12,"Timetables"),e.qZA()()()(),e.TgZ(13,"section",8)(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"button",13),e.NdJ("click",function(){return a.generateSchedules(10)}),e._uU(19,"Generate Schedules for 10 Classes"),e.qZA(),e.YNc(20,W,2,1,"div",14),e.qZA()()()()()(),e._UZ(21,"app-admin-footer")),2&i&&(e.xp6(20),e.Q6J("ngIf",a.dataSources.length>0))},dependencies:[g.sg,g.O5,g.PC,c.rH,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,p,f,h],styles:["#main[_ngcontent-%COMP%]{margin-left:260px;padding:90px 30px 30px;background:#f1f3f5;min-height:100vh}.card[_ngcontent-%COMP%]{border-radius:12px}.card-body[_ngcontent-%COMP%]{padding:20px}.timetable-container[_ngcontent-%COMP%]{margin:20px 0}.timetable[_ngcontent-%COMP%]{width:100%;margin-top:10px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center;border:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:700}td[_ngcontent-%COMP%]{min-width:150px;vertical-align:top}.btn-edit[_ngcontent-%COMP%]{background:#2c3340;color:#fff;border:none;border-radius:6px;padding:6px 15px;transition:background .3s}.btn-edit[_ngcontent-%COMP%]:hover{background:#1a1d29}@media (max-width: 991px){#main[_ngcontent-%COMP%]{margin-left:0}}"]}),n})()}];let te=(()=>{const t=class{};let n=t;return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,c.Bz.forChild(ee),l.u5,u.p0]}),n})()}}]);